---
layout: post
title: Selenium 常用方法
categories: Selenium
tags: 
    - iframe
    - navigate
    - getAttribute
    - javascript
---

## iframe

{% highlight java %}

package com.goodhope.test;

public class Selenium extends FunctionalTestCase {

    public void testFortest() {
        selenium.open("http://127.0.0.1:1080/WebTours/");
        selenium.type("username", "jojo");
        selenium.type("password", "bean");
        clickAndWait("login");
        selenium.selectFrame("info");
        assertTextPresent("Welcome, jojo");
        selenium.selectFrame("relative=top");     //回到顶部，这样可以再选择frame，不然直接选择//frame会报错。
        selenium.selectFrame("navbar");
        clickAndWait("alt=Search Flights Button");//因为图片只有alt跟src两种定义，如果去掉alt=的话//会出错，因为selenium默认click动作，好像是id  or  name
        selenium.selectFrame("info");
        assertTextPresent("Find Flight");
        clickAndWait("name=findFlights");
        assertTextPresent("Flight departing from");
    }
}

{% endhighlight %}

## navigate

driver.navigate().refresh();

navigate():用来模拟浏览器工具栏上一些按钮的功能

Navigation: History and Location

Earlier, we covered navigating to a page using the “get” command ( driver.get("http://www.example.com")) As you’ve seen, WebDriver has a number of smaller, task-focused interfaces, and navigation is a useful task. Because loading a page is such a fundamental requirement, the method to do this lives on the main WebDriver interface, but it’s simply a synonym to:

driver.navigate().to("http://www.example.com");

To reiterate: “navigate().to()” and “get()” do exactly the same thing. One’s just a lot easier to type than the other!

The “navigate” interface also exposes the ability to move backwards and forwards in your browser’s history:

driver.navigate().forward();
driver.navigate().back();

Please be aware that this functionality depends entirely on the underlying browser. It’s just possible that something unexpected may happen when you call these methods if you’re used to the behaviour of one browser over another.

## getAttribute 

用getAttribute要得到属性如下：

selenium.getAttribute("//div[@id='mydiv']@style")

这里要得到id 为mydiv的层的style的属性

## javascript

javascript:

JavascriptExecutor js = (JavascriptExecutor) driver;

js.executeScript("CKEDITOR.instances['editor'].setData('想自由')");

可以用js直接去调用js方法

## isElementPresent()

selenium之前的版本有：

selenium.isElementPresent()的方法

但是在selenium暂时还没有找到相应的方法，那可以去封装一个方法：

    protected boolean IsElementPresent(By by) {

        try {
            driver.findElement(by);
            return true;
        } catch (Exception e) {
            return false;
        }
    }

然后直接调用这个方法就OK了，比如：

assertTrue(IsElementPresent(By.id("fsfas")));

assertFalse(IsElementPresent(By.id("fsfas")));

## Filling In Forms

We’ve already seen how to enter text into a textarea or text field, but what about the other elements? You can “toggle” the state of checkboxes, and you can use “setSelected” to set something like an OPTION tag selected. Dealing with SELECT tags isn’t too bad:

    WebElement select = driver.findElement(By.xpath("//select"));
    List<WebElement> allOptions = select.findElements(By.tagName("option"));
    for (WebElement option : allOptions) {
        System.out.println(String.format("Value is: %s", option.getValue()));
        option.setSelected();
    }

This will find the first “SELECT” element on the page, and cycle through each of it’s OPTIONs in turn, printing out their values, and selecting each in turn. As you can see, this isn’t the most efficient way of dealing with SELECT elements. WebDriver’s support classes include one called “Select”, which provides useful methods for interacting with these.

    Select select = new Select(driver.findElement(By.xpath("//select")));
    select.deselectAll();
    select.selectByVisibleText("Edam");

This will deselect all OPTIONs from the first SELECT on the page, and then select the OPTION with the displayed text of “Edam”.


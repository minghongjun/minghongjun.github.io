---
layout: post
title: linux vi编辑器命令大全
categories: linux
tags: vi
---

<html><head></head><body><!--博文正文 begin -->
	<div id="articlebody" class="artical" favMD5='{"670bfea20100htlg":"47e87a42e625e200ed9a81749c8c4134"}'>
		<div class="articalTitle"> 
			
								<h2 id="t_670bfea20100htlg" class="titName SG_txta">（转）vi编辑器命令大全</h2>
			
					<span class="time SG_txtc">(2010-04-12 22:53:06)</span><div class="turnBoxzz"><a href="javascript:;" class="SG_aBtn SG_aBtn_ico SG_turn"  action-type="reblog" action-data="{srcBlog:1, blogId:'670bfea20100htlg'}"><cite><img class="SG_icon SG_icon111" src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" width="15" height="15" align="absmiddle">转载<em class="arrow">▼</em></cite></a></div>		</div>
		<div class="articalTag" id="sina_keyword_ad_area">
			<table>
				<tr>
					<td class="blog_tag">
					<script>
					var $tag='it';
					var $tag_code='f0262fdab16d645aa5c317d0b902ee7a';
					var $r_quote_bligid='670bfea20100htlg';
					var $worldcup='0';
					var $worldcupball='0';
					</script>
											<span class="SG_txtb">标签：</span>
																				<h3><a href="http://search.sina.com.cn/?c=blog&q=it&by=tag" target="_blank">it</a></h3>
																</td>
					<td class="blog_class">
											<span class="SG_txtb">分类：</span>
						<a target="_blank" href="http://blog.sina.com.cn/s/articlelist_1728839330_8_1.html">linux</a>
										</td>
				</tr>
			</table>
		</div>
						<!-- 正文开始 -->
		<div id="sina_keyword_ad_area2" class="articalContent  ">
			<p>1)文件操作<br />
vi FileName 打开文件 FileName,并将光标置于第一行首。<br />
vi +n FileName 打开文件 FileName,并将光标置于第 n 行首。<br />
vi + FileName 打开文件 FileName,并将光标置于最后一行。<br />
vi + /pattern File 打开文件 File,并将光标置于其中第一个于 pattern 匹配的字符串处。<br />
vi &ndash;r FileName 在上次正用 vi 编辑 FileName 发生系统崩溃后,恢复FileName。<br />
vi File1 … Filen 打开多个文件,依次对之进行编辑。<br />
<br />
:%!xxd 按十六进制查看当前文件<br />
:%!xxd -r 从十六进制返回正常模式<br />
<br />
:n1,n2 co n3 将 n1 行到 n2 行之间的内容拷贝到第 n3 行下。<br />
:n1,n2 m m3 将 n1 行到 n2 行之间的内容移至第 n3 行下。<br />
:n1,n2 d 将 n1 行到 n2 行之间的内容删除。<br />
:n1,n2 w filename 将 n1 行到 n2 行之间的内容保存到文件 filename 中<br />
:n1,n2 w! Command 将文件中n1行到n2行的内容作为 Command的输入并执行之，<br />
若不指定 n1、n2，则将整个文件内容作为 Command 的输入。<br />
:r! Command 将命令 Command 的输出结果放到当前行。<br />
:nr &lt;文件&gt;
把&lt;文件&gt;插入到第n行<br />
:so &lt;文件&gt;
读取&lt;文件&gt;,再执行文件里面的命令(文件中的命令应该都是一些ex命令)<br />

:l1,l2w &lt;文件&gt;
把第l1和第l2行之间的文本写到&lt;文件&gt;中去<br />
:w &gt;&gt;
&lt;文件&gt;
添加到&lt;文件&gt;末尾. 也可以使用行号<br />
:e! 重新编辑当前文件,忽略所有的修改<br />
<br />
<br />
<br />
·(、[、、]、)对应显示<br />
% 显示当前(、[、{ 、}、] 、)的对应项<br />
) 显示对应的(<br />
) 显示对应的[<br />
] 显示对应的{<br />
<br />
<br />
·(、[、、]、)内数据选择<br />
daB 删除{}及其内的内容 (在非v可视模式下)<br />
diB 删除{}中的内容<br />
ab 选择()中的内容<br />
ib 选择()中的内容( 不含() )<br />
<br />
aB 选择{}中的内容<br />
iB 选择{}中的内容( 不含{} )<br />
<br />
·语法提示与自动补齐<br />
<br />
&#9733;
&lt;C-N&gt;&lt;C-P&gt;
插入模式下的单词自动完成<br />
&#9733;
&lt;C-X&gt;&lt;C-L&gt;
行自动完成(超级有用)<br />
<br />
·设置ctags<br />
#ctags -f /usr/share/vim/vim63/funcs.tags -R /opt/j2sdk/src
/usr/src/<br />
kernels/2.6.9-5.EL-i686<br />
<br />
^p 自动补齐上下文已有相近项<br />
^n 自动补齐~/.tags中的相近函数<br />
^[ 显示~/.tags中的光标下的函数的原型,<br />
按^t退出函数<br />
:pta 函数名预览窗口快速打开相应函数所在文件，并将光标定位在对应函数的开头<br />
K 显示光标下的C函数的man说明手册<br />
<br />
·变量定位<br />
gd 转到光标下局部变量的定义处<br />
Gd 转到光标下全局变量的定义处<br />
<br />
<br />
·编译选项<br />
:cn 命令会把你带到下一个出错地点，而不考虑它在什么文件里。<br />
:cc 命令会向你显示当前错误的编译器输出信息；<br />
:cl 会生成一个列有项目所有错误的列表，以供浏览这些错误<br />
<br />
<br />
<br />
3]光标移动<br />
·字符<br />
h 光标左移一个字符。<br />
l 光标右移一个字符。<br />
<br />
·字<br />
w 或 W 光标右移一个字至字首。<br />
B 或 b 光标左移一个字至字首。<br />
E 或 e 光标右移一个字至字尾。<br />
<br />
·句} 光标移至句尾。<br />
( 光标移至句首。<br />
<br />
·段) 光标移至段落开头。<br />
{ 光标移至段落结尾。<br />
<br />
·行k 或 Ctrl+p 光标上移一行。<br />
j 或 Ctrl+n 光标下移一行。<br />
Enter 光标下移一行。<br />
nG 光标移至第 n 行首。<br />
n+ 光标下移 n 行。<br />
n- 光标上移 n 行。<br />
n$ 光标移至第 n 行尾。<br />
0 光标移至当前行首。<br />
$ 光标移至当前行尾。<br />
<br />
·屏幕<br />
H 光标移至屏幕顶行。<br />
M 光标移至屏幕中间行。<br />
L 光标移至屏幕最后行。<br />
Ctrl+u 向文件首翻半屏。<br />
Ctrl+d 向文件尾翻半屏。<br />
Ctrl+f 向文件尾翻一屏。<br />
Ctrl+b 向文件首翻一屏。<br />
nz 将第 n 行滚至屏幕顶部。不指定 n 时将当前行滚至屏幕顶。<br />
<br />
4}插入<br />
<br />
# 在文件中插入行号(不是显示行号，是插入！)<br />
&#9733;:g/^/exec "s/^/".strpart(line(".")." ", 0, 4)<br />
<br />
·光标<br />
i 在光标前插入。<br />
a 在光标后插入。<br />
<br />
·行<br />
I 在当前行首插入。<br />
A 在当前行尾插入。<br />
o 在当前行之下一新行插入。<br />
O 在当前行之上新开一行插入。<br />
<br />
<br />
<br />
5)替换<br />
r 替换当前字符。<br />
R 替换当前字符及其后的字符，直至按 ESC 键。<br />
s 从当前光标位置处开始，以输入的文本代替指定数目的字符。<br />
S 删除指定数目的行，并以所输入的文本代替。<br />
<br />
6)修改<br />
ncw 或 nCW 修改指定数目的字符。<br />
nCC 修改指定数目的行。<br />
:r filename 将文件 filename 插入在当前行之下<br />
<br />
7)查找替换<br />
<br />
/&lt;C-R&gt;&lt;C-W&gt;
把狭义单词 &lt;cword&gt; 写到搜索命令行<br />
/&lt;C-R&gt;&lt;C-A&gt;
把广义单词 &lt;cWORD&gt; 写到搜索命令行<br />
<br />
:g/str/s/str1/str2/g<br />
第一个g表示对每一个包括s1的行都进行替换，<br />
第二个g表示对每一行的所有进行替换<br />
包括str的行所有的str1都用str2替换<br />
:%s/f $/for$/g 将每一行尾部的“f ”（f键和空格键）替换为for<br />
:%s/^/mv /g 在每一行的头部添加“mv ”（mv键和空格键）<br />
<br />
:s/fred/&lt;c-r&gt;a/g 替换fred成register
a中的内容，呵呵<br />
<br />
<br />
:g/&lt;input|&lt;form/p
显示含&lt;input或&lt;form的行<br />
<br />
<br />
# 替换一个visual区域<br />
# 选择一个区域，然后输入 :s/Emacs/Vim/ 等等，vim会自动进入:模式<br />
:'&lt;,'&gt;s/Emacs/Vim/g
前面的'&lt;,'&gt;是vim自动添加的<br />
<br />
<br />
# 在多个文档中搜索<br />
:bufdo /searchstr<br />
:argdo /searchstr<br />
<br />
<br />
<br />
<br />
复制与剪切<br />
xp 交换前后两个字符的位置<br />
ddp 上下两行的位置交换<br />
:g/fred/t$ 拷贝行，从fred到文件末尾(EOF)<br />
<br />
<br />
<br />
9)窗口操作<br />
:vne [filename]<br />
:sp [filename]<br />
:S [filename]<br />
:new [filename]<br />
:^w + ^r 交换两个窗口的位置<br />
^w = 窗口等宽<br />
:res -n 窗口高度减小n<br />
:res +n 窗口高度增大n<br />
:vert res -n<br />
:vert res +n<br />
<br />
10)DOS格式文本转成Unix格式文本<br />
:1,$s/^M//g<br />
<br />
11)书签<br />
在阅读和编写大的程序文件时，利用标记（书签）功能定位是十分有帮助的。<br />
<br />
将光标移到想做标记的位置。假如做一个名为“debug1”的标记，那么用户可在命令模<br />
式下输入做标记的命令“mdebug1”，然后敲入回车键，一个名为“debug1”的标记就做好<br />
了。<br />
接下来用户可以随意将光标移到其它的位置，当在命令模式下输入“`debug1”后，就能<br />
快速回到“debug1”的标记所在行的行首。<br />
<br />
<br />
12)删除操作<br />
<br />
:%s/r//g 删除DOS方式的回车^M<br />
:%s= *$== 删除行尾空白<br />
<br />
:%s/^(.*)n1/1$/ 删除重复行<br />
<br />
:%s/^.pdf/new.pdf/ 只是删除第一个pdf<br />
<br />
:%s/&lt;!--_.--&gt;//
又是删除多行注释（咦？为什么要说「又」呢？）<br />
<br />
:g/^s*$/d 删除所有空行<br />
:g!/^dd/d 删除不含字符串'dd'的行<br />
:v/^dd/d 同上（译释：v == g!，就是不匹配！）<br />
<br />
:g/str1/,/str2/d 删除所有第一个含str1到第一个含str2之间的行<br />
<br />
<br />
:v/./.,/./-1join 压缩空行<br />
:g/^$/,/./-j 压缩空行<br />
<br />
ndw 或 ndW 删除光标处开始及其后的 n-1 个字符。<br />
d0 删至行首。<br />
d$ 删至行尾。<br />
ndd 删除当前行及其后 n-1 行。<br />
x 或 X 删除一个字符。<br />
Ctrl+u 删除输入方式下所输入的文本。<br />
^R 恢复u的操作<br />
J 把下一行合并到当前行尾<br />
V 选择一行<br />
^V 按下^V后即可进行矩形的选择了<br />
aw 选择单词<br />
iw 内部单词(无空格)<br />
as 选择句子<br />
is 选择句子(无空格)<br />
ap 选择段落<br />
ip 选择段落(无空格)<br />
D 删除到行尾<br />
x,y 删除与复制包含高亮区<br />
<br />
dl 删除当前字符（与x命令功能相同）<br />
d0 删除到某一行的开始位置<br />
d^ 删除到某一行的第一个字符位置（不包括空格或TAB字符）<br />
dw 删除到某个单词的结尾位置<br />
d3w 删除到第三个单词的结尾位置<br />
db 删除到某个单词的开始位置<br />
dW 删除到某个以空格作为分隔符的单词的结尾位置<br />
dB 删除到某个以空格作为分隔符的单词的开始位置<br />
d7B 删除到前面7个以空格作为分隔符的单词的开始位置<br />
d）删除到某个语句的结尾位置<br />
d4）删除到第四个语句的结尾位置<br />
d（删除到某个语句的开始位置<br />
d）删除到某个段落的结尾位置<br />
d{ 删除到某个段落的开始位置<br />
d7{ 删除到当前段落起始位置之前的第7个段落位置<br />
dd 删除当前行<br />
d/text 删除从文本中出现“text”中所指定字样的位置，<br />
一直向前直到下一个该字样所出现的位置（但不包括该字样）之间的内容<br />
dfc 删除从文本中出现字符“c”的位置，一直向前直到下一个该字符所出现的位置（包<br />
括该字符）之间的内容<br />
dtc 删除当前行直到下一个字符“c”所出现位置之间的内容<br />
D 删除到某一行的结尾<br />
d$ 删除到某一行的结尾<br />
5dd 删除从当前行所开始的5行内容<br />
dL 删除直到屏幕上最后一行的内容<br />
dH 删除直到屏幕上第一行的内容<br />
dG 删除直到工作缓存区结尾的内容<br />
d1G 删除直到工作缓存区开始的内容<br />
修改命令操作<br />
r 更改当前字符<br />
cw 修改到某个单词的结尾位置<br />
c3w 修改到第三个单词的结尾位置<br />
cb 修改到某个单词的开始位置<br />
cW 修改到某个以空格作为分隔符的单词的结尾位置<br />
cB 修改到某个以空格作为分隔符的单词的开始位置<br />
c7B 修改到前面7个以空格作为分隔符的单词的开始位置<br />
c0 修改到某行的结尾位置<br />
c} 修改到某个语句的结尾位置<br />
c4} 修改到第四个语句的结尾位置<br />
c（修改到某个语句的开始位置<br />
c）修改到某个段落的结尾位置<br />
c{ 修改到某个段落的开始位置<br />
c7{ 修改到当前段落起始位置之前的第7个段落位置<br />
ctc 修改当前行直到下一个字符c所出现位置之间的内容<br />
C 修改到某一行的结尾<br />
cc 修改当前行<br />
5cc 修改从当前行所开始的5行内容<br />
. 重复上一次修改！<br />
<br />
<br />
13}Set 选项设置<br />
set all 列出所有选项设置情况。<br />
set term 设置终端类型。<br />
set ignorecase 在搜索中忽略大小写。<br />
set list 显示制表位(^I)和行尾标志($)。<br />
set number 显示行号。<br />
set showmode 示用户处在什么模式下<br />
set report 显示由面向行的命令修改国的行数目。<br />
set terse 显示简短的警告信息。<br />
set warn 在转到别的文件时，若没有保存当前文件则显示 No write 信息。<br />
set autowrite 在“:n”和“:!”命令之前都自动保存文件<br />
set nomagic 允许在搜索模式中，使用前面不带\的特殊字符。<br />
set nowrapscan 禁止 vi 在搜索到达文件两端时,又从另一端开始。<br />
set mesg 允许 vi 显示其他用户用 write 写到自己终端上的信息。<br />
<br />
autoindent (ai) noai 使新行自动缩进,和上(下)行的位置对齐<br />
autoprint (ap) ap 每条命令之后都显示出修改之处<br />
autowrite (aw) noaw 在:n,:!命令之前都自动保存文件<br />
beautify (bf) nobf 在输入的时候忽略所有的控制字符(除了制表键(tab),换行<br />
(newline),进纸(formfeed))<br />
directory= (dir=) /tmp 存放缓冲区的目录名<br />
edcompatible noedcompatible 在替换的时候使用类ed的用法<br />
errorbells (eb) errorbells 出错的时候响铃<br />
exrc (ex) noexrc 允许在主目录(home)外面之外放.exrc文件<br />
hardtabs= (ht=) 8 设置硬制表的边界<br />
ignore case (ic) noic 正规式里忽略大小写<br />
lisp nolisp 打开lisp模式<br />
list nolist 显示所有的制表键和行的结尾<br />
magic agic 可以使用更多的正规表达式<br />
mesg mesg 允许向终端发送消息<br />
number (nu) nonumber 显示行号<br />
open open 允许开放和可视化<br />
optimize (opt) optimize 优化吞吐量,打印时不发回车<br />
paragraphs= (para=) IPLPPPQPPLIbp 设置{ &amp; }的分界符<br />
prompt prompt 命令模式下的输入给出:的提示符<br />
readonly (ro) noro 除非用!号否则不准保存文件<br />
redraw noredraw 当编辑的时候重绘屏幕<br />
remap remap 允许宏指向其他的宏<br />
report= 5 如果影响的行数&gt;这个数的话就报告<br />
scroll 1/2 window 下卷屏幕时滚动屏幕的数目, 同样这也是z命令输出的行数(z 输<br />
出2倍滚屏的大小)<br />
sections= SHNHH HU 定义节的末尾(当使用命令[[ 和 ]] 时)<br />
shell= (sh=) /bin/sh 缺省的SHELL,如果设置了环境变量SHELL的话,就使用变量<br />
shiftwidth= (sw=) 8 当使用移动(shift)命令时移动的字符数<br />
showmatch (sm) nosm 显示{, }, (, ), [, 或者 ] 的匹配情况<br />
showmode noshowmode 显示你处在什么模式下面<br />
slowopen (slow) 插入之后不要立刻更新显示<br />
tabstop= (ts=) 8 设置制表停止位(tabstop)的长度<br />
taglength= (tl=) 0 重要标记的字符个数(0表示所有的字符)<br />
tags= tag, /usr/lib/tags 定义包含标记的文件路径<br />
term= 设置终端类型<br />
terse noterse 显示简短的错误信息<br />
timeout (to) timeout 一秒钟后键盘映射超时<br />
ttytype= 设置终端类型<br />
warn warn 显示"No write since last change"信息<br />
window= (w=) 可视模式下窗口的行数<br />
wrapmargin= (wm=) 0 右边距,大于0的话最右边的单词将折行,留出n个空白位置<br />
wrapscan (ws) ws 查找到文件尾后再重头开始<br />
writeany (wa) nowa 可以保存到任意一个文件去<br />
<br />
14}特殊字符<br />
^ 匹配字符串位于行首。<br />
$ 匹配字符串位于行尾。<br />
. 用在模式串中，表示任何单个字符。<br />
在命令模式下，重复上次的命令。<br />
* 在模式串中，表示其前字符可出现任意多次。<br />
[] 用在模式串中,表示指定方位内字符，其中可用-表示一个字<br />
符范围，用^表示不在某个范围内的字符。<br />
ESC 从插入状态转换到命令状态<br />
^[ 功能同 ESC<br />
<br />
15]大小写转换<br />
guu 行小写<br />
gUU 行大写<br />
g~~ 行翻转（当然指大小写啦）<br />
<br />
guw 字小写(狭义字) 译注：建议对比iw<br />
gUw 字大写(狭义字)<br />
g~w 字翻转(狭义字)<br />
<br />
vEU 字大写(广义字)<br />
vE~ 字翻转(广义字)<br />
<br />
ggguG 把整个文章全部小写（ft!bt!）<br />
<br />
16) 跳转足迹'. 跳到最后修改的那一行 (超级有用)(ft,怎么又是这个评价)<br />
`. 不仅跳到最后修改的那一行，还要定位到修改点<br />
&lt;C-O&gt; 依次沿着你的跳转记录向回跳 (从最近的一次开始)<br />
&lt;C-I&gt; 依次沿着你的跳转记录向前跳<br />
:ju(mps) 列出你跳转的足迹<br />
<br />
17)命令历史<br />
:history 列出历史命令记录<br />
:his c 命令行命令历史<br />
:his s 搜索命令历史<br />
q/ 搜索命令历史的窗口<br />
q 命令行命令历史的窗口<br />
:&lt;C-F&gt; 历史命令记录的窗口<br />
<br />
18]寄存器<br />
# 列出寄存器(Registers)<br />
:reg 显示所有当前的registers<br />
"1p 表示引用register，1表示一个名字叫做1的register，p就是粘贴（paste）命令<br />
<br />
译释：<br />
"%</P>							
		</div>
						<!-- 正文结束 --></dody></html>